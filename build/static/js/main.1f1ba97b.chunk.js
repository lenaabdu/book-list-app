(this.webpackJsonpbooklist=this.webpackJsonpbooklist||[]).push([[0],{33:function(e,t,a){e.exports=a(61)},38:function(e,t,a){},40:function(e,t,a){},61:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(25),o=a.n(l),i=(a(38),a(6)),u=a(7),c=a(10),s=a(9),d=(a(39),a(30)),m=a(8),b=a(32),h=a(27),k=a(12),p=(a(40),a(11)),v=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={disabled:!1},n}return Object(u.a)(a,[{key:"submitHandler",value:function(e){var t,a=this;e.preventDefault(),this.setState({disabled:!0}),this.props.currentbook?(t=this.props.client.updatebook(this.props.currentbook.id,e.target.title.value,e.target.author.value,e.target.read.value,e.target.uri.value),console.log(t)):t=this.props.client.addbook(e.target.title.value,e.target.author.alue,e.target.read.value,e.target.uri.value),t.then((function(){a.setState({disabled:!1}),document.getElementById("bookForm").reset(),a.props.refreshList()})).catch((function(){alert("an error occured, please try again"),a.setState({disabled:!1})}))}},{key:"render",value:function(){var e,t,a,n,l=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{id:"bookForm",onSubmit:function(e){return l.submitHandler(e)}},r.a.createElement("h5",null,"Title"),r.a.createElement(p.a.Control,{name:"title",type:"text",defaultValue:null===(e=this.props.currentbook)||void 0===e?void 0:e.title,disabled:this.state.disabled}),r.a.createElement("br",null),r.a.createElement("h5",null,"Author"),r.a.createElement(p.a.Control,{name:"author",type:"text",defaultValue:null===(t=this.props.currentbook)||void 0===t?void 0:t.author,disabled:this.state.disabled}),r.a.createElement("br",null),r.a.createElement("h5",null,"Read/Not Read"),r.a.createElement(p.a.Control,{name:"read",type:"text",defaultValue:null===(a=this.props.currentbook)||void 0===a?void 0:a.read,disabled:this.state.disabled}),r.a.createElement("br",null),r.a.createElement("h5",null,"URI"),r.a.createElement(p.a.Control,{name:"uri",type:"text",defaultValue:null===(n=this.props.currentbook)||void 0===n?void 0:n.uri,disabled:this.state.disabled}),r.a.createElement("br",null),r.a.createElement(k.a,{variant:"primary",type:"submit",disabled:this.state.disabled},this.props.currentbook?"Update":"Add")))}}]),a}(r.a.Component),E=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={books:[],currentbook:void 0},n}return Object(u.a)(a,[{key:"refreshList",value:function(){var e=this;this.props.client.getbooks().then((function(t){return e.setState({books:t.data})}))}},{key:"removebook",value:function(e){this.props.client.removebook(e).then(this.refreshList())}},{key:"updatebook",value:function(e){this.setState({currentbook:e})}},{key:"componentDidMount",value:function(){this.refreshList()}},{key:"buildRows",value:function(){var e=this;return this.state.books.map((function(t){return r.a.createElement("tr",{key:t.id},r.a.createElement("td",null," ",t.id),r.a.createElement("td",null,t.title),r.a.createElement("td",null,t.author),r.a.createElement("td",null,t.read?"Read":"Not read"),r.a.createElement("td",null," ",r.a.createElement("a",{href:"url"},t.uri)),r.a.createElement("td",null,r.a.createElement(k.a,{className:"mr-2 mb-2",onClick:function(){return e.updatebook(t)}}," update"),r.a.createElement(k.a,{className:"mb-2",variant:"danger",onClick:function(){return e.removebook(t.id)}}," remove")))}))}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(v,{client:this.props.client,refreshList:function(){e.refreshList(),e.setState({currentbook:void 0})},currentbook:this.state.currentbook}),r.a.createElement("br",null),r.a.createElement("hr",null),r.a.createElement("br",null),r.a.createElement(h.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"ID"),r.a.createElement("th",null,"Title"),r.a.createElement("th",null,"Author"),r.a.createElement("th",null,"Read/NOT"),r.a.createElement("th",null,"Book Link"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,this.buildRows())))}}]),a}(r.a.Component),f=a(28),y=a.n(f),g=a(29),O=a.n(g),j="https://book-list-api.herokuapp.com/",C=function(){function e(){Object(i.a)(this,e)}return Object(u.a)(e,[{key:"apiCall",value:function(e,t,a){return O()({method:e,url:t,data:a})}},{key:"getbooks",value:function(){return this.apiCall("get","".concat(j,"books"))}},{key:"addbook",value:function(e,t,a,n){return this.apiCall("post","".concat(j,"book/create"),{title:e,author:t,read:a,uri:n})}},{key:"removebook",value:function(e){return this.apiCall("delete","".concat(j,"book/").concat(e))}},{key:"updatebook",value:function(e,t,a,n,r){return this.apiCall("put","".concat(j,"book/").concat(e),{title:t,author:a,read:n,uri:r})}}]),e}(),S=a(31),w=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={listbooks:[]},n.client=new C((function(){return n.state.token}),(function(){return n.logout()})),n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("list");this.setState({listbooks:JSON.parse(e)||[]})}},{key:"updateListbooks",value:function(e,t,a,n){var r=this,l={id:e,title:t,author:a,read:n};this.setState((function(e){return{listbooks:e.listbooks.concat(l)}}),(function(){return localStorage.setItem("list",JSON.stringify(r.state.listbooks))}))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,null,r.a.createElement(m.a,{sm:4}),r.a.createElement(m.a,{sm:1},r.a.createElement(y.a,{path:S.a,size:5,title:"Booklist",color:"#007bff"})),r.a.createElement(m.a,null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h1",{sm:2}," My",r.a.createElement("span",{className:"color"},"Book"),"List")),r.a.createElement(m.a,{sm:4})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(b.a,null,r.a.createElement(E,{books:this.state.listbooks,client:this.client})))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[33,1,2]]]);
//# sourceMappingURL=main.1f1ba97b.chunk.js.map